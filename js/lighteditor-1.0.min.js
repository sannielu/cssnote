window.qnml=window.qnml||{};
(function(d){var c=[],b=!1,e=[];d.addLanguage=function(b){for(var m=d.lib.isArray.call(b.nodeName)?b.nodeName:[b.nodeName],r=0,h;h=m[r];r++)c.push({nodeName:h,parse:b.parse,match:new RegExp("<"+h+"([^>]*)>([\\s\\S]*?)<\\/"+h+">","gi")});e.push(b.style||"")};d.parse=function(b,m,d){for(var e=!1,p=0,k;k=c[p];p++)if(k.nodeName==m){b=k.parse(b,null,b,d);e=!0;break}e||(b=this.parse(b,"qnml:unknown",d));return b};d.parseAll=function(d,m){b||(this.insertStyle(e.join("\r\n")),b=!0);for(var r=0,h;h=c[r];r++)d=
d.replace(h.match,function(b,c,d){return h.parse(b,c,d,m)});return d};d.insertStyle=function(b){var c=document.createElement("style");c.type="text/css";document.getElementsByTagName("head")[0].appendChild(c);b&&(c.styleSheet?c.styleSheet.cssText=b:c.appendChild(document.createTextNode(b)));return c.sheet||c}})(window.qnml);qnml.lib=qnml.lib||{};
(function(d){var c={13:"@line@",10:"@line@",9:"&nbsp;&nbsp;&nbsp;&nbsp;",32:"&nbsp;",160:"&nbsp;",11:""},b=/(\/{2,}[^\r\n]*)|(\/\*[\s\S]*?\*\/)|(<!\-\-[\s\S]*?\-\->)/g,e=/([\r\n])(#.*)/g,g=/(\'.*?[^\\]?\')|(\".*?[^\\]?\")/g,m=/([,;{(\[\s=:])(\/.+?[^\\]\/)([igm]+|[,.;)\]}\s])/g,r=/(\W)(\d+)(\W|$)/g,h=/[<>'"&;]/g,p=/\r\n/g,k=/[\s]/g,l=/@tag(\d+)@/g,v={Format:function(b,c){this.raw=b;this.index=0;this.pool={};this.config=c||{};this.config.option||(this.config.option={});this.output=b}};v.Format.prototype=
{process:function(b,c){this.index++;var d={output:String(b)};this.escape.call(d);this.escBlank.call(d);d=d.output.split("@line@");this.pool[this.index]={data:d,module:c};return"@tag"+this.index+"@"},trim:function(b){return b.replace(/(^[\r\n]+)|(\s+$)/g,"")},escString:function(){var b=this;this.output=this.output.replace(g,function(c){return b.process(c,"string")});return this},escComment:function(){var c=this;this.output=this.output.replace(b,function(b){return c.process(b,"comment")});return this},
escPound:function(){var b=this;this.output=this.output.replace(e,function(c,d,k){return d+b.process(k,"pound")});return this},escRegExp:function(){var b=this;this.output=this.output.replace(m,function(c,d,k,a){if(/^\/\//.test(k))return c;/[igm]/.test(a)&&(k+=a,a="");return d+b.process(k,"regexp")+a});return this},escNumber:function(){var b=this;this.output=this.output.replace(r,function(c,d,k,a){return d+b.process(k,"number")+a});return this},escKeyWord:function(){var b=this,c=this.config.keywords;
c&&(this.output=this.output.replace(new RegExp("(^|\\W)("+c.join("|")+")(\\W|$)","g"),function(c,d,a,t){return d+b.process(a,"keyword")+t}));return this},escLibrary:function(){var b=this,c=this.config.library;c&&(this.output=this.output.replace(new RegExp("(^|\\W)("+c.join("|")+")(\\W|$)","g"),function(c,d,a,t){return d+b.process(a,"library")+t}));return this},escape:function(){this.output=this.output.replace(h,function(b){return"&#"+b.charCodeAt(0)+";"});return this},escBlank:function(){this.output=
this.output.replace(p,function(b){return"@line@"});this.output=this.output.replace(k,function(b){return c[b.charCodeAt(0)]||""});return this},check:function(){var b=this;this.output=this.output.replace(/&#38#/g,"&#");this.output=this.output.replace(l,function(c,d){return b.pool[d].data.join("")});return this},restHtml:function(){var b=this,c=0;this.output=this.output.replace(l,function(c,d){return b.color(b.pool[d])});this.config.option.inner||(this.output=this.output.replace(RegExp("@line@","g"),
function(){c++;return b.color({data:[c],module:"line",attr:'unselectable="on"'})+"<br />"}),c++,this.output+=b.color({data:[c],module:"line"}));return this},color:function(b){if(b){for(var c=[],d=1<b.data.length?"@line@":"",k=0,a=b.data.length;k<a;k++)c.push("<span "+(b.attr||"")+' class="hh-'+b.module+'">'+b.data[k]+"</span>");return c.join(d)}},lightHtml:function(){var b=this,c=0,d={};this.output=this.output.replace(/(<script[^>]*>)([\s\S]*?)(<\/script>)/g,function(b,a,t,n){if(!/\w/.test(t))return b;
c++;d[c]=qnml.parse(t,"qnml:code-js",{inner:!0});return a+"{tpl"+c+"}"+n});this.output=this.output.replace(/(<style[^>]*>)([\s\S]*?)(<\/style>)/g,function(b,a,t,n){if(/style/i.test(t)||!/\w/.test(t))return b;c++;d[c]=qnml.parse(t,"qnml:code-css",{inner:!0});return a+"{tpl"+c+"}"+n});this.output=this.output.replace(/<!\-\-[\s\S]*?\-\->/g,function(c){return b.process(c,"comment")});this.output=this.output.replace(/<!DOCTYPE[^>]+>/i,function(c){return b.process(c,"pound")});this.output=this.output.replace(/(<\w+)(.*?)(>)/g,
function(c,a,d,n){c=b.process(a,"tag");d=d.replace(/([\w\-]+=)(\".*?\"|\'.*?\')/g,function(a,c,n){return b.process(c,"attr")+b.process(n,"string")});n=b.process(n,"tag");return c+d+n});this.output=this.output.replace(/(\/>|<\/\w+>)/g,function(c){return b.process(c,"tag")});this.escape();this.escBlank();this.output=this.output.replace(/{tpl(\d+)}/g,function(b,a){return d[a]});this.restHtml().check();return'<div class="hh-code">'+this.output+"</div>"},lightCss:function(){var b=this;this.escString().escComment();
this.output=this.output.replace(/([\w\-])\:([^;\r\n}]+)/g,function(c,d,k){return b.process(d,"keyword")+":"+b.process(k,"library")});this.escBlank().restHtml().check();return this.config.option.inner?this.output:'<div class="hh-code">'+this.output+"</div>"},lightCode:function(){this.escRegExp().escString().escComment().escPound().escNumber().escKeyWord().escLibrary().escape().escBlank().restHtml().check();return this.config.option.inner?this.output:'<div class="hh-code">'+this.output+"</div>"},toString:function(){return this.lightCode()}};
d.highlight=v})(qnml.lib);qnml.lib=qnml.lib||{};
(function(d){var c=/```\s*(\w+)([\s\S]+?)\n```/g,b=/\n{2,}([\s\S]+)\n{2,}/g,e=/[<>'"&;]/g,g=/(#{1,6})([^\n]+)/g,m=/(\*+)([^\*\n]+?)(\*+)/g,r=/{tpl\d+}/g,h={},p=0;d.markdown={toHTML:function(d){var l=this;d=d.replace(/\r\n/g,"\n").replace(/\r/g,"\n");d=d.replace(/(^\n+)|(\s+$)/g,"");d=d.replace(c,function(b,c,d){return l.push(l.surround(qnml.parse(d,"qnml:code-"+c)+"",{className:"code"}))});d=d.replace(g,function(b,c,d){return l.push(l.surround(l.pre(d.replace(/#+$/,"")),{className:"title",tag:"h"+
c.length}))});d=d.replace(m,function(b,c,d,k){return l.push(l.surround(l.pre(d),{inLine:!0,className:"em",style:"font-weight:"+(500+100*k.length)}))});d=d.replace(b,function(b,c){return l.push(l.surround(l.pre(c),{className:"paragraph"}))});d=this.pre(d);return d=this.pull(d)},pre:function(b){b=b.replace(e,function(b){return"&#"+b.charCodeAt(0)+";"});b=b.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return b=b.replace(/\s/g,function(b){return{10:"<br>",9:"&nbsp;&nbsp;&nbsp;&nbsp;",32:"&nbsp;"}[b.charCodeAt(0)]||
""})},surround:function(b,c){c=c||{};var d=c.tag?c.tag:c.inLine?"span":"div";return("<"+d+' class="md-'+c.className+'" style="'+c.style+'">$</'+d+">").replace("$",b)},push:function(b){var c="{tpl"+ ++p+"}";h[c]=b;return c},pull:function(b){var c=this;b=b.replace(r,function(b){b=h[b];return r.test(b)?c.pull(b):b});h={};return b}}})(qnml.lib);qnml.lib=qnml.lib||{};
(function(d){var c=Object.prototype.toString;d.isArray=function(){return"[object Array]"==c.call(this)};d.tmpl=function(){var b={};return function g(c,d,h){h=h||{};var p=h.key;h=h.mixinTmpl;var k=!/\W/.test(c),p=p||(k?c:null),l;if(p){var v=p;if(!(p=b[p])){c=k?document.getElementById(c).innerHTML:c;if(h)for(l in h)c=c.replace(new RegExp("<%#"+l+"%>","g"),h[l]);p=g(c)}l=b[v]=p}else l=new Function("obj","var _p_=[],print=function(){_p_.push.apply(_p_,arguments);};with(obj){_p_.push('"+c.replace(/[\r\t\n]/g,
" ").split("\\'").join("\\\\'").split("'").join("\\'").split("<%").join("\t").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("_p_.push('")+"');}return _p_.join('');");return d?l(d):l}}()})(qnml.lib);
(function(){qnml.addLanguage({nodeName:["qnml:code-cpp","qnml:code-h","qnml:code-c","qnml:code-cc"],parse:function(d,c,b,e){return new qnml.lib.highlight.Format(b,{keywords:"typedef auto double inline short typeid bool int signed typename long sizeof case enum static unsigned namespace using char virtual struct class void const private template float protected public goto if else while do switch case new continue try catch return break delete true fale".split(" "),library:[]})}})})();
(function(){qnml.addLanguage({nodeName:["qnml:code-css"],parse:function(d,c,b,e){return(new qnml.lib.highlight.Format(b,{option:e})).lightCss()}})})();(function(){qnml.addLanguage({nodeName:["qnml:code-html","qnml:code-htm"],parse:function(d,c,b,e){return(new qnml.lib.highlight.Format(b)).lightHtml()},style:'.hh-code{        font-family: Consolas, "Liberation Mono", Courier, monospace;        font-size: 12px;        line-height: 18px;        color: #333333;        margin-left:40px;        border-left: 1px solid #D4D4D4;        position:relative;        padding:10px;        word-wrap:break-word;        text-decoration:none;    }    u .hh-code{        text-decoration:none;    }    .hh-comment{        color: #999999;        font-style: italic;    }    .hh-pound{        color: #999988;    }    .hh-tag{        color:#000080;    }    .hh-attr{        color:#008080;    }    .hh-string{        color: #d14;    }    .hh-regexp{        color: #009926;    }    .hh-keyword{        font-weight: bold;    }    .hh-library{        color: #0086B3;    }    .hh-number{        color: #009999;    }    .hh-line{        position:absolute;        left:-40px;        display: inline-block;        width: 30px;        color: #aaa;        text-align: right;        padding-right: 8px;        -webkit-user-select:none;    }'})})();
(function(){qnml.addLanguage({nodeName:["qnml:code-js","qnml:code-as"],parse:function(d,c,b,e){e=e||{};return new qnml.lib.highlight.Format(b,{keywords:"var function if else while do switch case new continue in typeof instanceof try catch return break this delete undefined null true fale".split(" "),library:"Array Boolean Date Function Number Object RegExp String Error decodeURI decodeURIComponent encodeURI encodeURIComponent eval isFinite isNaN parseFloat parseInt Infinity JSON Math NaN undefined null arguments document window getElementById getElementsByTagName addEventListener removeEventListener setTimeout clearTimeout setInterval clearInterval".split(" "),
option:e})}})})();
(function(){qnml.addLanguage({nodeName:["qnml:code-php"],parse:function(d,c,b,e){return new qnml.lib.highlight.Format(b,{keywords:"__halt_compiler abstract and array as break callable case catch class clone const continue declare default die do echo else elseif empty enddeclare endfor endforeach endif endswitch endwhile eval exit extends final for foreach function global goto if implements include include_once instanceof insteadof interface isset list namespace new or print private protected public require require_once return static switch throw trait try unset use var while xor".split(" "),library:"__CLASS__ __DIR__ __FILE__ __FUNCTION__ __LINE__ __METHOD__ __NAMESPACE__ __TRAIT__".split(" ")})}})})();
(function(){qnml.addLanguage({nodeName:"qnml:code",parse:function(d,c,b,e){var g=/language=[\"\']?(\w*)[\"\']?/i.exec(c)[1],m=g;if(c=/text=[\"\']?(\w*)[\"\']?/i.exec(c))m=c[1];if(e&&"edit"==e.status)return qnml.lib.tmpl('<div id="<%=isNew?"ve-codewrapper":""%>" class="g_md_codeBox" name="ve-codewrapper" data-qnml="<%=tag%>" contenteditable="false">\x3c!--no gettitle start--\x3e\x3c!--no url start--\x3e<div name="ve-codeblock" data-language="<%=language%>" data-text="<%=languageText%>" class="code_content"><textarea name="ve-codetextarea" class="ve-codetextarea" _event="textarea"><%=source%></textarea></div>\x3c!--no gettitle end--\x3e\x3c!--no url end--\x3e\x3c!--<div class="code_bottom" contenteditable="false" name="ve-codebottom"><div class="codeType_box codeType_edit" name="ve-bottom"><a class="codeType" href="#inner" _event="changeLanguage" title="<%=languageText%>"><span name="ve-bottomlanguage"><%=languageText%></span><span class="g_ico g_ico_drop3"></span></a><a href="#inner" class="codeType_clear" title="\u6e05\u9664\u683c\u5f0f" _event="clearformat">\u6e05\u9664\u683c\u5f0f</a><div class="codeType_menu g_md_menu g_md_menu_show" name="ve-languageoption" style="display:none"><ul><li><a href="#inner" title="html" value="html|html" _event="codeoption">html</a><span class="g_ico g_ico_tick"></span></li><li><a href="#inner" title="javascript" value="js|javascript" _event="codeoption">javascript</a><span class="g_ico g_ico_tick"></span></li><li><a href="#inner" title="css" value="css|css" _event="codeoption">css</a><span class="g_ico g_ico_tick"></span></li><li><a href="#inner" title="c/c++" value="c|c/c++" _event="codeoption">c/c++</a><span class="g_ico g_ico_tick"></span></li><li class="last"><a href="#inner" title="php" value="php|php" _event="codeoption">php</a><span class="g_ico g_ico_tick"></span></li></ul><span class="arrow"><span class="arrow"></span></span></div></div></div>--\x3e</div>',
{language:g,languageText:m,tag:encodeURIComponent(d),source:b,isNew:e.isNew});d=document.createElement("textarea");d.innerHTML=b.replace(/\n/g,"%@%");b=d.value.replace(/%@%/g,"\n");""==b&&(b=" ");"\n"==b[b.length-1]&&(b+=" ");return qnml.lib.tmpl('    <div class="g_md_codeBox">\x3c!--no url start--\x3e\x3c!--no gettitle start--\x3e<div class="code_content">        <pre class="ve-codepre" name="ve-codepre"><%=hilightcode%></pre>    </div>    <div class="code_bottom">        <span name="ve-codelanguage" class="codeType_box"><%=languageText%></span>    </div>\x3c!--no gettitle end--\x3e\x3c!--no url end--\x3e</div>',
{language:g,languageText:m,hilightcode:qnml.parseAll("<qnml:code-"+g+">"+b+"</qnml:code-"+g+">")})},style:"    /*\u7ec8\u7aef\u7684\u6837\u5f0f*/    .g_md_codeBox{background-color:#fbfbfb;border:1px solid #cbcbcb;word-wrap:break-word;word-break:break-all;white-space:normal;position:relative}    .g_md_codeBox .code_content{padding:5px}    .g_md_codeBox .codeType_box{font-size:12px;color:#999}    .g_md_codeBox .code_keyword{color:#39f}    .g_md_codeBox .codeType_edit{}    .g_md_codeBox .code_bottom{position:relative;height:27px}    .g_md_codeBox .code_bottom .codeType_box{padding:0 6px;height:23px;line-height:23px;position:absolute;left:2px;top:0;border:1px dashed transparent}    .g_md_codeBox .code_bottom .codeType_edit{background-color:#fff;border:1px solid #cbcbcb}    .g_md_codeBox .code_bottom .codeType_box a{text-decoration:none}    .g_md_codeBox .code_bottom .codeType_box .codeType{color:#666}    .g_md_codeBox .code_bottom .codeType_box .codeType_clear{border-bottom:1px solid #099;color:#099;padding-bottom:1px}    .g_md_codeBox .code_bottom .g_ico_drop3{margin:0 6px 0 2px}    .g_md_codeBox .codeType_menu{top:23px;left:-1px}    .g_md_codeBox .codeType_menu_above{bottom:23px;left:-1px;border-bottom-width:1px}    .g_md_codeBox .code_bottom .g_md_menu{width:126px}    .g_md_codeBox .code_bottom .g_md_menu a{text-decoration:none}    .g_md_codeBox .code_bottom .g_md_menu .arrow{display:none}    @media screen and (max-width:650px) {        .editTool_code{display:none!important}     }"})})();
(function(){qnml.addLanguage({nodeName:"qnml:file",parse:function(d,c,b,e){b=document.createElement("div");b.innerHTML="<span "+c+"></span>";c=b.getElementsByTagName("span")[0];d=encodeURIComponent(d);b=c.getAttribute("src");e=c.getAttribute("name");var g=c.getAttribute("filesize"),m=c.getAttribute("filetype");c=c.getAttribute("percent");isNaN(g)||(g=g?g/1024:0,g=1024<g?(g/1024).toFixed(2)+"M":g.toFixed(2)+"KB");return qnml.lib.tmpl('<div class="qnml-box">    <div>&nbsp;</div>\x3c!--no url start--\x3e    <div data-qnml="<%=data.tag%>" class="content_delete_ie">        <div title="<%=data.name%>" class="g_md_clipBox file_box" contenteditable="false" unselectable="on" _event="viewFile" data-name="<%=data.name%>" data-type="<%=data.filetype%>" <% if(data.src){ %> data-src="<%=data.src%>"<% } %> >            <%     var fileIco = "";    if (data.filetype == 0) {    fileIco = "clip_normal";    } else if (data.filetype == 1) {    fileIco = "clip_normal";    } else {    fileIco = "clip_normal";    }    %>            <span class="ico_clip <%=fileIco%>"></span>            <p class="clipName"><%=data.name%></p>            <% if(data.percent){ %>            <p class="progressBar"><span class="progress" style="width:<%=data.percent%>"></span></p>            <% } %>            <% if(data.filesize){ %>            <p class="size"><%=data.filesize%></p>            <% } %>            <span class="g_ico g_ico_popClose" _event="delFile" title="\u5220\u9664\u9644\u4ef6"></span>        </div>    </div>\x3c!--no url end--\x3e    <div>&nbsp;</div></div>',
{data:{tag:d,src:b,filesize:g,name:e,filetype:m,percent:c}})},style:".g_md_clipBox{-moz-user-select:none; -webkit-user-select:none; font-weight:normal!important; text-decoration:none!important; color:#666; margin-bottom: 10px;}.g_md_clipBox strong{font-weight:normal}.g_md_clipBox u{text-decoration:none}.g_md_clipBox em{font-style:normal}.file_box{cursor:pointer}.file_box:hover{background-color:#f5f5f5!important}.qnml-box .g_ico_popClose{display:none}.ve-editor .qnml-box .g_ico_popClose{display:inherit}"})})();
(function(){qnml.addLanguage({nodeName:"qnml:md",parse:function(d,c,b,e){return qnml.lib.markdown.toHTML(b)},style:".md-paragraph{margin:10px 0px;padding:5px;border:1px dashed #ccc;}.md-code{border:1px solid #ccc;}"})})();
(function(){qnml.addLanguage({nodeName:"qnml:item",parse:function(d,c,b,e){d=document.createElement("div");d.innerHTML="<span "+c+">";c=d.getElementsByTagName("span")[0].getAttribute("checked");return qnml.lib.tmpl("    <div>\x3c!--no url start--\x3e    <span class=\"todo-checkbox note_component content_delete_ie\"><span class=\"<%=checked%>\" onclick=\"if(this.className=='ico_checkbox') this.className='ico_checkbox_sel';else if(this.className=='ico_checkbox_sel') this.className='ico_checkbox';\"></span></span><span class=\"todo-content\"><%=content%></span>\x3c!--no url end--\x3e    </div>",{checked:"true"==
c?"ico_checkbox_sel":"ico_checkbox",content:b})},style:"    .todo-checkbox{    display:inline-block;    vertical-align: middle;    }    .todo-content{    margin-left:10px    }    .note_component span{display: inline-block;width:32px;height:32px;}.note_component .ico_checkbox{background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRjgwNkVEREYyQkYxMUUyQTUxMUQwNjIxNjA0ODlCRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRjgwNkVERUYyQkYxMUUyQTUxMUQwNjIxNjA0ODlCRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZGODA2RURCRjJCRjExRTJBNTExRDA2MjE2MDQ4OUJGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZGODA2RURDRjJCRjExRTJBNTExRDA2MjE2MDQ4OUJGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+c6GDqwAAAIBJREFUeNpi/P//P8NAAiaGAQajDmBB5ty4ccMTSM0FYkkq2/MciJM1NDS2EwoBWljOADVzLsEQgFkOdClVbQeGLAMuj40mwlEHjDpg1AGjDhh1wKgDRh0w6oDB1SqGtl4loW04aoMXxIRACi6FFIKnoGY5NgnG0b7hiHcAQIABAFA6F+FU2FivAAAAAElFTkSuQmCC) no-repeat;}.note_component .ico_checkbox_sel{background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRjgwNkVEOUYyQkYxMUUyQTUxMUQwNjIxNjA0ODlCRiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRjgwNkVEQUYyQkYxMUUyQTUxMUQwNjIxNjA0ODlCRiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZGODA2RUQ3RjJCRjExRTJBNTExRDA2MjE2MDQ4OUJGIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZGODA2RUQ4RjJCRjExRTJBNTExRDA2MjE2MDQ4OUJGIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+hyKRkwAAAfpJREFUeNpi/P//P8NAAsZRByA74MaNG55Aai4QS1LZnudAnKyhobEdXYIFjU8LyxmgZoLMlrLzimQD0suAOACIJ7BgUcgAdClVbQeGLNhsqOVrgNgXKpXPRK+4/vP3LwOa5SCwm4lels9csIoBzfJTQBzJQmvL//37xzBn8VqGi1dvMaBZ7nZo2/KPTLS2vKVnGsO5S9exWg7iMNHa8j0HjuK0nKADrt64zdAzZQ7DiTMXKLZcVlqCAd1ybAXRf+Rs6BeZzvDh4ycGJkZGhuqSLAZXRxuyLJeWFGMoyoxnMDUxYiRUEKEAJiZIAP0DOrIVaCgI4HMEyDM9k+egWK4oL8uQkxzBwMvDhd0OfA5oqMhjYGdjQ3HE7v1HcFreN3Uew5ad+1Esn9hRg9Nygg4w0NVk6GwsQ3FEe/8MhqMnzmK1fOO2PRiWC/Dz4Y0ygrnASF8bxRF//vxlqG3rhzsCm+XSkuIME9oJW050NoQ5go2NFcURR06cwWr5pM46BkEBPqJyDN5cgA5AvgZZDHIANgCzXFRECFtlBDKXkawQgAFrC2OG5qpCBhYWZqItp0oUEHIEuZaTXRSDHNFUVcDAw80FtrynpZIsy0lOAxQ2SChPA7QAA+4AFiytV0lYkFEZvCAmBFJwKaQQPAU1y0d7RqMOGJQOAAgwAMJoAaCZeKFxAAAAAElFTkSuQmCC) no-repeat;}.note_component .ico_dot{background: url(component/comp_dot.png) no-repeat 50% 50%;}"})})();
(function(){qnml.addLanguage({nodeName:"qnml:unknown",parse:function(d,c,b,e){return qnml.lib.markdown.pre(b)}})})();
(function(){qnml.addLanguage({nodeName:"qnml:voice",parse:function(d,c,b,e){b=document.createElement("div");b.innerHTML="<span "+c+"></span>";e=b.getElementsByTagName("span")[0];d=encodeURIComponent(d);c=e.getAttribute("src");b=e.getAttribute("filesize");e=e.getAttribute("seconds");var g=Math.floor(e/60),m=e%60,g=(9<g?g:"0"+g).toString()+":"+(9<m?m:"0"+m).toString();b=(parseFloat(b)/1E3).toFixed(2)+"KB";return qnml.lib.tmpl('<div class="qnml-box"><div>&nbsp;</div>\x3c!--no url start--\x3e<div data-qnml="<%=data.tag%>" class="content_delete_ie"><div class="g_md_clipBox voice_box stationary_voice_box" contenteditable="false" unselectable="on" data-src="<%=data.src%>" data-seconds="<%=data.seconds%>"><span class="ico_clip clip_play voice_control" _event="playVoice">\u64ad\u653e</span><span class="ico_clip clip_pause voice_control" _event="pauseVoice" style="display:none">\u6682\u505c</span><span class="ico_clip clip_stop voice_control" _event="stopVoice" style="display:none">\u505c\u6b62</span><div class="progressBar_play"><p style="width:0%;" class="progress_play"><span class="progress_dot" _event = "voiceProgress"></span></p></div><span class="clipName">\u5f55\u97f3</span><span class="clipSeconds"><%=data.formartSeconds%></span><span class="clipSize"><%=data.filesize%></span><span class="time_current" style="display:none">00:00</span><span class="time_total" style="display:none"><%=data.formartSeconds%></span><span title="\u5220\u9664\u5f55\u97f3" _event="delVoice" class="g_ico g_ico_popClose"></span><span class="download_voice" _event="downloadVoice" title="\u4e0b\u8f7d"></span>    </div></div>\x3c!--no url end--\x3e    <div>&nbsp;</div></div>',
{data:{tag:d,src:c,filesize:b,seconds:e,formartSeconds:g}})},style:'.voice_control{cursor:pointer}.stationary_voice_box .clipName,.stationary_voice_box .clipSeconds,.stationary_voice_box .clipSize{position:relative; top:9px; margin-right:10px}.voice_box .g_ico_popClose{cursor:pointer}.g_md_clipBox_play .g_ico_popClose{right:0px; top:0px}.download_voice{width:12px; height:13px; display:inline-block; cursor:pointer; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAANAQMAAACn5x0BAAAAA3NCSVQICAjb4U/gAAAABlBMVEWGjZT///8WZGrIAAAAAnRSTlP/AOW3MEoAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDgvMTcvMTMNl9j1AAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M1cbXjNgAAABxJREFUCJlj+PCBAQ0dMGB4UABiWB5gsD/AAAYApKERWcskvewAAAAASUVORK5CYII="); position: relative; left: 10px; top: 10px;}.g_md_clipBox_play .download_voice{display:none}'})})();
(function(d,c){d.command=function(){this.init.apply(this,arguments)};command.prototype={init:function(b){this.stepstack=[];this.current=-1;this.maxStep=10;b=b||{maxStep:10};this.maxStep=b.maxStep},saveStep:function(b){this.current<this.stepstack.length-1&&(this.stepstack=this.stepstack.slice(0,this.current+1));this.stepstack.length>=this.maxStep?this.stepstack.shift():this.current++;this.stepstack.push(b)},undo:function(){0<this.current&&this.current--;return this.stepstack[this.current]},redo:function(){this.current<
this.stepstack.length-1&&this.current++;return this.stepstack[this.current]},todo:function(b){return this.stepstack[b-1]},reset:function(){this.stepstack=[];this.current=-1;this.maxStep=10}}})(window,void 0);window.LE={};
(function(d){var c=unescape("%A0%A0%A0%A0"),b=c.length,e=unescape("%A0"),g=String.fromCharCode("12288"),m=!0,r=!0,h=!1,p,k,l=!1,v={229:1,231:1,197:1},y={8:function(a,d){var n=d.target,u=n.value,f=a.textarea.selectionStart,q=a.textarea.selectionEnd;a.saveCurrentValue();if(f==q&&0<f){if(a.rawCode.slice(f-b,f)==c)return a.rawCode=a.rawCode.slice(0,f-b)+a.rawCode.substring(f),a.textBoard.innerHTML=a.getHighlightCode(a.options.language),n.value=u.slice(0,f-b)+u.substring(f),n.selectionStart=n.selectionEnd=
f-b,a.options.adjustHeight&&a.adjustHeight(),!1;m&&"\n"==a.rawCode[f-2]&&a.rawCode.lastIndexOf("\n")<=f?(a.rawCode=a.rawCode.slice(0,f-2),m=!1):a.rawCode=a.rawCode.slice(0,f-1)+a.rawCode.substring(f);a.textBoard.innerHTML=a.getHighlightCode(a.options.language);a.options.adjustHeight&&a.adjustHeight();return!0}a.rawCode.substring(f,q);m&&"\n"==a.rawCode[f-1]&&a.rawCode.lastIndexOf("\n")<=f?(a.rawCode=a.rawCode.slice(0,f-1)+a.rawCode.substring(q),m=!1):a.rawCode=a.rawCode.slice(0,f)+a.rawCode.substring(q);
a.textBoard.innerHTML=a.getHighlightCode(a.options.language);a.options.adjustHeight&&a.adjustHeight();return!0},46:function(a,d){var n=d.target,u=n.value,f=a.textarea.selectionStart,q=a.textarea.selectionEnd;if(f==q){a.saveCurrentValue();if(a.rawCode.slice(f,f+b)==c)return a.rawCode=a.rawCode.slice(0,f)+a.rawCode.substring(f+b),a.textBoard.innerHTML=a.getHighlightCode(a.options.language),n.value=u.slice(0,f)+u.substring(f+b),n.selectionStart=n.selectionEnd=f,a.options.adjustHeiginitht&&a.adjustHeight(),
!1;a.rawCode=a.rawCode.slice(0,f)+a.rawCode.substring(f+1);a.textBoard.innerHTML=a.getHighlightCode(a.options.language);a.options.adjustHeight&&a.adjustHeight();return!0}a.saveCurrentValue();a.rawCode=a.rawCode.slice(0,f)+a.rawCode.substring(q);a.textBoard.innerHTML=a.getHighlightCode(a.options.language);return!0},9:function(a,d){for(var n=d.target,u=n.selectionStart,f=n.selectionEnd,q=n.value.substring(u,f),e=q.split("\n"),k=a.rawCode.substring(u,f).split("\n"),g=q=c,h=0,l=e.length;h<l;h++){var m=
e[h];0==h?(q+=m,g+=k[h]):(q+=c+m,g+=c+k[h]);h<l-1&&(q+="\n",g+="\n")}a.saveCurrentValue();a.rawCode=a.rawCode.slice(0,u)+g+a.rawCode.substring(f);n.value=n.value.slice(0,u)+q+n.value.substring(f);n.selectionStart=u+b;n.selectionEnd=f+e.length*b;a.textBoard.innerHTML=a.getHighlightCode(a.options.language);a.options.adjustHeight&&a.adjustHeight();return!1},90:function(a,b){if(b.ctrlKey||b.metaKey){r||(a.saveCurrentValue(),r=!0);var c=a.command.undo();if(void 0!=c){var d=c.code,f=c.start,c=c.end,e=w(d);
a.rawCode=d;a.textarea.value=e;a.textarea.selectionEnd=c;a.textarea.selectionStart=f;a.textBoard.innerHTML=a.getHighlightCode(a.options.language);a.options.adjustHeight&&a.adjustHeight()}return!1}return!0},89:function(a,b){if(b.ctrlKey||b.metaKey){r||(a.saveCurrentValue(),r=!0);var c=a.command.redo();if(void 0!=c){var d=w(c.code);a.rawCode=c.code;a.textarea.value=d;a.textarea.selectionEnd=c.end;a.textarea.selectionStart=c.start;a.textBoard.innerHTML=a.getHighlightCode(a.options.language);a.options.adjustHeight&&
a.adjustHeight()}return!1}return!0}},s={insertStyle:function(a){var b=document.createElement("style");b.type="text/css";document.getElementsByTagName("head")[0].appendChild(b);a&&(b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)));return b.sheet||b},extend:function(a,b){for(var c in b)a[c]=b[c];return a},addEvt:function(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent&&a.attachEvent("on"+b,c)},getElementAttribute:function(a,b,c){for(c=c||document.body;a&&
1==a.nodeType;){var d=a.getAttribute(b);if(null!==d)return d;if(a==c)break;a=a.parentNode}},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},bindEvt:function(a,b,c,d){s.addEvt(a,b,function(a){var b=a.target||a.srcElement;currentTarget=b;var e=!0;if(s.isFunction(c))e=c.call(b,a,b,d);else{var g=s.getElementAttribute(b,"_event",this);g&&c[g]&&(e=c[g].call(b,a,b,d))}e||(a.preventDefault?a.preventDefault():a.returnValue=!1)})}};d.lightEditor=function(a,b){this.textarea=
a;b=b||{};this.options=s.extend({language:"js",adjustHeight:!0,maxBackStep:10,lineHeight:18},b);this.rawCode=this.textarea.value||this.textarea.innerText;this.command=new window.command;this.command.maxStep=this.options.maxBackStep;this.keyDownHandles=y;this.mirror=document.createElement("pre");this.textBoard=document.createElement("div");this.wrapper=document.createElement("div");this.heightHolder=document.createElement("div");var c=this.mirror,d=this.textBoard,f=this.wrapper,e=this.textarea,g=this.heightHolder;
c.setAttribute("name","le-heightpre");c.className+=" le-common-default le-pre-default";d.setAttribute("name","le-textboard");d.className=" le-common-default le-textboard-default";e.setAttribute("bind","bind");e.className+=" le-common-default le-textarea-default";var h=e.parentNode,k=e.nextSibling;g.setAttribute("name","le-heightdiv");f.setAttribute("name","le-wrapper");f.setAttribute("contentediable","false");f.appendChild(d);f.appendChild(e);f.appendChild(c);f.setAttribute("contentediable","false");
f.appendChild(g);h.insertBefore(f,k);this.init();return this};d.lightEditor.prototype={init:function(){var a=this;s.bindEvt(this.textarea,"keypress",function(d){var g=a.textarea.selectionStart,f=a.textarea.selectionEnd;if(d.ctrlKey||d.altKey||d.metaKey)return!0;if(13==d.keyCode){m=!0;d="\n";x(a);var h=a.rawCode.substring(0,g).split("\n").slice(-1)[0];if(h&&(h=(new RegExp("^("+c+")+")).exec(h))){for(var k=h[0].length/b,l="",h=0;h<k;h++)l+=c,d+=c;var t=setTimeout(function(){a.textarea.value=a.textarea.value.slice(0,
g+1)+l+a.textarea.value.substring(f+1);a.textarea.selectionEnd=a.textarea.selectionStart=f+1+k*b;window.clearTimeout(t)},10)}a.rawCode=a.rawCode.slice(0,g)+d+a.rawCode.substring(f);a.textBoard.innerHTML=a.getHighlightCode(a.options.language);a.options.adjustHeight&&a.adjustHeight();return!0}if(0==d.charCode)return!0;d=String.fromCharCode(d.charCode);a.saveCurrentValue();a.rawCode=a.rawCode.slice(0,g)+d+a.rawCode.substring(f);a.textBoard.innerHTML=a.getHighlightCode(a.options.language);a.textarea.value=
a.textarea.value.slice(0,g)+e+a.textarea.value.substring(f);a.textarea.selectionStart=a.textarea.selectionEnd=g+1;a.options.adjustHeight&&a.adjustHeight()});s.bindEvt(this.textarea,"keydown",function(b){keyDownValue=a.textarea.value;!!v[b.keyCode]!=h&&((h=!!v[b.keyCode],h)?p!=k&&(a.rawCode=a.rawCode.slice(0,p)+a.rawCode.substring(k),a.textBoard.innerHTML=a.getHighlightCode(a.options.language),k=p):x(a));a.textarea.selectionStart==a.textarea.selectionEnd&&(p=k);var c=!0;if(!h){var d=a.keyDownHandles[b.keyCode];
d&&(c=d(a,b))}return c});s.bindEvt(this.textarea,"click",function(b){a.textarea.selectionStart==a.textarea.selectionEnd&&(p=k)});s.bindEvt(this.textarea,"select",function(b){p=a.textarea.selectionStart;k=a.textarea.selectionEnd});s.bindEvt(this.textarea,"paste",function(b){var d=a.textarea.selectionStart,f=a.textarea.selectionEnd;b=(b.clipboardData||window.clipboardData).getData("text").replace(/\r\n/g,"\n").replace(/\t/g,c);a.saveCurrentValue();a.rawCode=a.rawCode.slice(0,d)+b+a.rawCode.substring(f);
a.textBoard.innerHTML=a.getHighlightCode(a.options.language);a.textarea.value=w(a.rawCode);a.textarea.selectionStart=a.textarea.selectionEnd=f+b.length;a.options.adjustHeight&&a.adjustHeight()});s.bindEvt(this.textarea,"copy",function(b){var d=b.target,d=a.rawCode.substring(d.selectionStart,d.selectionEnd).replace(new RegExp(c,"g"),"\t");(b.clipboardData||window.clipboardData).setData("text",d);return!1});s.bindEvt(this.textarea,"cut",function(b){var d=b.target,f=d.selectionStart,e=d.selectionEnd,
g=a.rawCode.substring(f,e).replace(new RegExp(c,"g"),"\t");(b.clipboardData||window.clipboardData).setData("text",g);a.saveCurrentValue();a.rawCode=a.rawCode.slice(0,f)+a.rawCode.substring(e);a.textBoard.innerHTML=a.getHighlightCode(a.options.language);a.textarea.value=d.value.slice(0,f)+d.value.substring(e);a.textarea.selectionStart=a.textarea.selectionEnd=f;a.options.adjustHeight&&a.adjustHeight();return!1});s.bindEvt(window,"resize",function(b){a.options.adjustHeight&&a.adjustHeight()});var d=
this.textarea.value;void 0==d&&(d=l?this.textarea.textContent:this.textarea.innerText);a.rawCode=d.replace(/\t/g,c);this.textarea.value=w(a.rawCode);this.options.adjustHeight&&this.adjustHeight();this.textarea.focus();a.textBoard.innerHTML=a.getHighlightCode(a.options.language);"textContent"in this.textarea&&(l=!0)},adjustHeight:function(){var a=this.rawCode;l?this.mirror.textContent=a.replace(/\n$/,"\nx"):this.mirror.innerText=a.replace(/\n$/,"\nx");this.textarea.style.height=this.textBoard.style.height=
this.heightHolder.style.height=this.mirror.offsetHeight+"px"},getRawCode:function(){return this.rawCode},getHighlightCode:function(a){a=a||this.options.language;var b=this.rawCode;""==b&&(b=" ");"\n"==b[b.length-1]&&(b+=" ");return qnml.parseAll("<qnml:code-"+a+">"+b+"</qnml:code-"+a+">")},saveCurrentValue:function(){this.command.saveStep({code:this.rawCode,start:this.textarea.selectionStart,end:this.textarea.selectionEnd});r=!1},setContent:function(a){var b=this.textarea.selectionEnd;this.rawCode=
a.replace(/\r\n/g,"\n");this.textBoard.innerHTML=this.getHighlightCode(this.options.language);this.textarea.value=w(this.rawCode);this.textarea.selectionStart=this.textarea.selectionEnd=b+a.length;this.options.adjustHeight&&this.adjustHeight()}};var x=function(a){if(""!=a.textarea.value){var b=a.textarea.selectionStart;a.textarea.value=a.textarea.value.replace(/[\S]/g,function(b,c){a.rawCode=a.rawCode.slice(0,c)+b+a.rawCode.substring(c);return/[\x00-\xff]/.test(b)?e:g});a.textBoard.innerHTML=a.getHighlightCode(a.options.language);
a.textarea.selectionStart=a.textarea.selectionEnd=b}},w=function(a){return a.replace(/[^\r\n]/g,function(a){return/[^\x00-\xff]/.test(a)?g:e})}})(LE);
